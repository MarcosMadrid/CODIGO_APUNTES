@model IEnumerable<ApiCorePersonas.Models.Persona>

@{
    ViewData["Title"] = "Index";
}

@section Scripts {
    <script>
        $(document).ready(function(){
            $("#boton").click(function(){
                var url = "https://apicorepersonas20240405102112.azurewebsites.net/api/Personas";
                $.ajax({
                    url:url,
                    method: "GET",
                    success:function(data){
                        var html = "";
                        $.each(data, function (index, persona) {
                            html += "<tr>";
                            html += "<td>" + persona.id + "</td>";
                            html += "<td>" + persona.name + "</td>";
                            html += "<td>" + persona.email + "</td>";
                            html += "<td>" + persona.age + "</td>";
                            html += "</tr>";
                        });
                        $("#tablapersonas tbody").html(html);
                    }
                })
            });
        });
    </script>
}

<h1>Index</h1>

<p>
    <button id="boton">Cargar Personas</button>
</p>
<table class="table" id="tablapersonas">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Id)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Age)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>
